generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL") 
}

model Trajeto {
  id               Int        @id @default(autoincrement())
  dataExecucao     DateTime   @default(now())
  respostaCarrinho Json?

  distanciaTotal     Float?   @default(0) // Distância total em cm
  tempoTotalEstimado Float?   @default(0) // Tempo total em segundos
  velocidadeMedia    Float?   @default(0) // Velocidade em cm/s

  nome               String?  
  isFavorito         Boolean  @default(false) 

  comandos         Comando[]
  logsSegmento LogSegmento[]
}

model Comando {
  id         Int      @id @default(autoincrement())
  acao       String
  valor      Float?
  direcao    String?
  trajetoId  Int
  trajeto    Trajeto  @relation(fields: [trajetoId], references: [id])
}
model LogSegmento {
  id              Int      @id @default(autoincrement())
  
  distancia       Float?   // Null se foi apenas rotação
  angulo          Float?   // Null se foi apenas movimento reto
  velocidadeMedia Float
  
  trajetoId       Int
  trajeto         Trajeto  @relation(fields: [trajetoId], references: [id])
  
  criadoEm        DateTime @default(now())
}